<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Webform Details - Issuetrak Webforms Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            min-height: 100vh;
            color: #e2e8f0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        .landing-navbar {
            background: rgba(15, 23, 42, 0.6);
            backdrop-filter: blur(14px);
            border-bottom: 1px solid rgba(148, 163, 184, 0.2);
        }

        .text-glow {
            color: #f8fafc;
            text-shadow: 0 0 18px rgba(148, 163, 184, 0.45);
        }

        .nav-link-muted {
            color: rgba(226, 232, 240, 0.75) !important;
            transition: color 0.2s ease;
        }

        .nav-link-muted:hover,
        .nav-link-muted:focus {
            color: #ffffff !important;
        }

        .glass-card {
            background: rgba(15, 23, 42, 0.65) !important;
            border: 1px solid rgba(148, 163, 184, 0.18) !important;
            backdrop-filter: blur(18px);
            border-radius: 1rem !important;
        }

        .text-subtle {
            color: rgba(226, 232, 240, 0.72);
        }

        .badge-soft {
            display: inline-block;
            padding: 0.35rem 0.75rem;
            border-radius: 999px;
            background: rgba(56, 189, 248, 0.16);
            color: #38bdf8;
            font-weight: 600;
            letter-spacing: 0.08em;
            text-transform: uppercase;
            font-size: 0.75rem;
        }

        .stat-card {
            background: rgba(15, 23, 42, 0.4);
            border: 1px solid rgba(148, 163, 184, 0.15);
            backdrop-filter: blur(12px);
            border-radius: 0.75rem;
            transition: all 0.2s ease;
        }

        .stat-card:hover {
            background: rgba(15, 23, 42, 0.55);
            border-color: rgba(148, 163, 184, 0.25);
            transform: translateY(-2px);
        }

        .field-card {
            background: rgba(15, 23, 42, 0.3);
            border: 1px solid rgba(148, 163, 184, 0.12);
            border-radius: 0.5rem;
            transition: all 0.2s ease;
        }

        .field-card:hover {
            background: rgba(15, 23, 42, 0.45);
            border-color: rgba(148, 163, 184, 0.2);
        }

        .stat-icon {
            width: 3rem;
            height: 3rem;
            border-radius: 0.75rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 1.25rem;
        }

        .loading {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .alert-dark {
            background-color: rgba(15, 23, 42, 0.8);
            border-color: rgba(220, 53, 69, 0.3);
            color: #f8d7da;
        }

        .btn-outline-info {
            border-color: rgba(56, 189, 248, 0.5);
            color: #38bdf8;
        }

        .btn-outline-info:hover {
            background-color: rgba(56, 189, 248, 0.1);
            border-color: #38bdf8;
        }

        .theme-toggle-btn {
            border: none !important;
            background: transparent !important;
            transition: all 0.2s ease;
            border-radius: 50% !important;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .theme-toggle-btn:hover {
            background: rgba(148, 163, 184, 0.1) !important;
            transform: scale(1.1);
        }

        /* Theme Menu Button */
        .theme-menu-btn {
            border: none !important;
            background: transparent !important;
            transition: all 0.2s ease;
            border-radius: 6px !important;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .theme-menu-btn:hover {
            background: rgba(148, 163, 184, 0.1) !important;
            transform: scale(1.05);
        }

        .theme-menu-btn:focus {
            box-shadow: none !important;
        }

        .hamburger-icon {
            color: rgba(226, 232, 240, 0.8);
            transition: all 0.2s ease;
        }

        .theme-menu-btn:hover .hamburger-icon {
            color: rgba(226, 232, 240, 1);
            transform: rotate(90deg);
        }

        /* Theme Dropdown Menu */
        .theme-dropdown-menu {
            background: rgba(15, 23, 42, 0.95) !important;
            backdrop-filter: blur(12px);
            border: 1px solid rgba(148, 163, 184, 0.2) !important;
            border-radius: 8px !important;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2) !important;
            min-width: 200px;
            padding: 0.5rem 0;
        }

        .theme-dropdown-menu .dropdown-header {
            color: rgba(226, 232, 240, 0.8) !important;
            font-weight: 600 !important;
            font-size: 0.75rem !important;
            text-transform: uppercase !important;
            letter-spacing: 0.05em !important;
            padding: 0.5rem 1rem !important;
            border-bottom: 1px solid rgba(148, 163, 184, 0.1) !important;
            margin-bottom: 0.25rem !important;
        }

        .theme-dropdown-menu .dropdown-item {
            color: rgba(226, 232, 240, 0.9) !important;
            padding: 0.75rem 1rem !important;
            transition: all 0.2s ease;
            background: transparent !important;
            border: none !important;
        }

        .theme-dropdown-menu .dropdown-item:hover {
            background: rgba(148, 163, 184, 0.1) !important;
            color: #ffffff !important;
        }

        .theme-option {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .theme-emoji {
            font-size: 1.25rem;
            width: 1.5rem;
            text-align: center;
        }

        .theme-name {
            font-weight: 500;
        }

        /* Light Mode Styles - Issuetrak Inspired */
        @import url('https://fonts.googleapis.com/css2?family=Jost:wght@400;500;600;700&family=Raleway:wght@400;500;600;700&display=swap');

        body.light-mode {
            background: #ffffff !important;
            color: #333333 !important;
            font-family: 'Raleway', 'Segoe UI', system-ui, sans-serif !important;
        }

        .light-mode .landing-navbar {
            background: #ffffff !important;
            backdrop-filter: none;
            border-bottom: 1px solid #e5e7eb !important;
            box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06) !important;
        }

        .light-mode .text-glow {
            color: #01418F !important;
            text-shadow: none !important;
            font-family: 'Jost', 'Segoe UI', system-ui, sans-serif !important;
            font-weight: 700 !important;
        }

        .light-mode .nav-link-muted {
            color: #4b5563 !important;
            font-weight: 500 !important;
        }

        .light-mode .nav-link-muted:hover,
        .light-mode .nav-link-muted:focus {
            color: #2ea0da !important;
        }

        .light-mode .glass-card {
            background: #ffffff !important;
            border: 1px solid #e5e7eb !important;
            backdrop-filter: none;
            color: #333333 !important;
            border-radius: 8px !important;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06) !important;
        }

        .light-mode .text-subtle {
            color: #6b7280 !important;
        }

        .light-mode .badge-soft {
            background: #dbeafe !important;
            color: #2ea0da !important;
            font-weight: 600 !important;
            border-radius: 8px !important;
        }

        .light-mode .stat-card {
            background: #ffffff !important;
            border: 1px solid #e5e7eb !important;
            color: #333333 !important;
            border-radius: 8px !important;
            box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06) !important;
        }

        .light-mode .stat-card:hover {
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06) !important;
            transform: translateY(-1px);
        }

        .light-mode .field-card {
            background: #ffffff !important;
            border: 1px solid #e5e7eb !important;
            color: #333333 !important;
            border-radius: 8px !important;
        }

        .light-mode .field-card:hover {
            background: #f9fafb !important;
            border-color: #d1d5db !important;
        }

        .light-mode .alert-dark {
            background-color: #fef2f2 !important;
            border-color: #fecaca !important;
            color: #dc2626 !important;
            border-radius: 8px !important;
        }

        .light-mode .btn-outline-info {
            border-color: #2ea0da !important;
            color: #2ea0da !important;
            border-radius: 8px !important;
            font-weight: 500 !important;
        }

        .light-mode .btn-outline-info:hover {
            background-color: #2ea0da !important;
            border-color: #2ea0da !important;
            color: #ffffff !important;
        }

        .light-mode .btn-outline-secondary {
            border-color: #6b7280 !important;
            color: #6b7280 !important;
            border-radius: 8px !important;
            font-weight: 500 !important;
        }

        .light-mode .btn-outline-secondary:hover {
            background-color: #6b7280 !important;
            border-color: #6b7280 !important;
            color: #ffffff !important;
        }

        .light-mode .theme-toggle-btn:hover {
            background: #f3f4f6 !important;
        }

        .light-mode .stat-icon {
            background: #dbeafe !important;
            color: #2ea0da !important;
            border-radius: 8px !important;
        }

        /* Ocean Theme - Custom Color Palette */
        body.custom-mode {
            background: linear-gradient(135deg, #08141e 0%, #0f2a3f 30%, #20394f 100%) !important;
            color: #f6d6bd !important;
        }

        .custom-mode .landing-navbar {
            background: rgba(8, 20, 30, 0.9) !important;
            backdrop-filter: blur(14px);
            border-bottom: 1px solid rgba(246, 214, 189, 0.2) !important;
        }

        .custom-mode .text-glow {
            color: #f6d6bd !important;
            text-shadow: 0 0 18px rgba(195, 163, 138, 0.4) !important;
        }

        .custom-mode .nav-link-muted {
            color: rgba(246, 214, 189, 0.8) !important;
        }

        .custom-mode .nav-link-muted:hover,
        .custom-mode .nav-link-muted:focus {
            color: #c3a38a !important;
        }

        .custom-mode .glass-card {
            background: rgba(15, 42, 63, 0.7) !important;
            border: 1px solid rgba(195, 163, 138, 0.2) !important;
            backdrop-filter: blur(18px);
            color: #f6d6bd !important;
        }

        .custom-mode .text-subtle {
            color: rgba(195, 163, 138, 0.8) !important;
        }

        .custom-mode .badge-soft {
            background: rgba(195, 163, 138, 0.2) !important;
            color: #c3a38a !important;
        }

        .custom-mode .stat-card {
            background: rgba(32, 57, 79, 0.6) !important;
            border: 1px solid rgba(195, 163, 138, 0.2) !important;
            color: #f6d6bd !important;
        }

        .custom-mode .stat-card:hover {
            background: rgba(32, 57, 79, 0.8) !important;
            border-color: rgba(195, 163, 138, 0.3) !important;
            transform: translateY(-1px);
        }

        .custom-mode .field-card {
            background: rgba(32, 57, 79, 0.4) !important;
            border: 1px solid rgba(195, 163, 138, 0.15) !important;
            color: #f6d6bd !important;
        }

        .custom-mode .field-card:hover {
            background: rgba(32, 57, 79, 0.6) !important;
            border-color: rgba(195, 163, 138, 0.25) !important;
        }

        .custom-mode .alert-dark {
            background-color: rgba(32, 57, 79, 0.8) !important;
            border-color: rgba(195, 163, 138, 0.3) !important;
            color: #f6d6bd !important;
        }

        .custom-mode .btn-outline-info {
            border-color: #c3a38a !important;
            color: #c3a38a !important;
        }

        .custom-mode .btn-outline-info:hover {
            background-color: #c3a38a !important;
            border-color: #c3a38a !important;
            color: #08141e !important;
        }

        .custom-mode .btn-outline-secondary {
            border-color: #997577 !important;
            color: #997577 !important;
        }

        .custom-mode .btn-outline-secondary:hover {
            background-color: #997577 !important;
            border-color: #997577 !important;
            color: #f6d6bd !important;
        }

        .custom-mode .theme-toggle-btn:hover {
            background: rgba(195, 163, 138, 0.1) !important;
        }

        .custom-mode .stat-icon {
            background: rgba(153, 117, 119, 0.3) !important;
            color: #997577 !important;
        }

        /* Midnight Theme - Galactic Colors */
        body.midnight-mode {
            background: linear-gradient(135deg, #0e0e12 0%, #1a1a24 30%, #333346 100%) !important;
            color: #e6e6ec !important;
        }

        .midnight-mode .landing-navbar {
            background: rgba(14, 14, 18, 0.9) !important;
            backdrop-filter: blur(14px);
            border-bottom: 1px solid rgba(230, 230, 236, 0.2) !important;
        }

        .midnight-mode .text-glow {
            color: #e6e6ec !important;
            text-shadow: 0 0 18px rgba(160, 160, 191, 0.4) !important;
        }

        .midnight-mode .nav-link-muted {
            color: rgba(230, 230, 236, 0.8) !important;
        }

        .midnight-mode .nav-link-muted:hover,
        .midnight-mode .nav-link-muted:focus {
            color: #a6a6bf !important;
        }

        .midnight-mode .glass-card {
            background: rgba(26, 26, 36, 0.7) !important;
            border: 1px solid rgba(160, 160, 191, 0.2) !important;
            backdrop-filter: blur(18px);
            color: #e6e6ec !important;
        }

        .midnight-mode .text-subtle {
            color: rgba(160, 160, 191, 0.8) !important;
        }

        .midnight-mode .badge-soft {
            background: rgba(160, 160, 191, 0.2) !important;
            color: #a6a6bf !important;
        }

        .midnight-mode .stat-card {
            background: rgba(51, 51, 70, 0.6) !important;
            border: 1px solid rgba(160, 160, 191, 0.2) !important;
            color: #e6e6ec !important;
        }

        .midnight-mode .stat-card:hover {
            background: rgba(51, 51, 70, 0.8) !important;
            border-color: rgba(160, 160, 191, 0.3) !important;
            transform: translateY(-1px);
        }

        .midnight-mode .field-card {
            background: rgba(51, 51, 70, 0.4) !important;
            border: 1px solid rgba(160, 160, 191, 0.15) !important;
            color: #e6e6ec !important;
        }

        .midnight-mode .field-card:hover {
            background: rgba(51, 51, 70, 0.6) !important;
            border-color: rgba(160, 160, 191, 0.25) !important;
        }

        .midnight-mode .alert-dark {
            background-color: rgba(51, 51, 70, 0.8) !important;
            border-color: rgba(160, 160, 191, 0.3) !important;
            color: #e6e6ec !important;
        }

        .midnight-mode .btn-outline-info {
            border-color: #a6a6bf !important;
            color: #a6a6bf !important;
        }

        .midnight-mode .btn-outline-info:hover {
            background-color: #a6a6bf !important;
            border-color: #a6a6bf !important;
            color: #0e0e12 !important;
        }

        .midnight-mode .btn-outline-secondary {
            border-color: #8080a4 !important;
            color: #8080a4 !important;
        }

        .midnight-mode .btn-outline-secondary:hover {
            background-color: #8080a4 !important;
            border-color: #8080a4 !important;
            color: #e6e6ec !important;
        }

        .midnight-mode .theme-toggle-btn:hover {
            background: rgba(160, 160, 191, 0.1) !important;
        }

        .midnight-mode .stat-icon {
            background: rgba(128, 128, 164, 0.3) !important;
            color: #8080a4 !important;
        }

        /* Sage Garden Theme - Natural Earth Tones */
        body.sage-mode {
            background: linear-gradient(135deg, #e2e4df 0%, #c5cfc4 30%, #a8b5ae 100%) !important;
            color: #92929c !important;
        }

        .sage-mode .landing-navbar {
            background: rgba(226, 228, 223, 0.95) !important;
            backdrop-filter: blur(14px);
            border-bottom: 1px solid rgba(146, 146, 156, 0.3) !important;
            box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1) !important;
        }

        .sage-mode .text-glow {
            color: #92929c !important;
            text-shadow: none !important;
            font-weight: 700 !important;
        }

        .sage-mode .nav-link-muted {
            color: rgba(146, 146, 156, 0.8) !important;
            font-weight: 500 !important;
        }

        .sage-mode .nav-link-muted:hover,
        .sage-mode .nav-link-muted:focus {
            color: #aba47b !important;
        }

        .sage-mode .glass-card {
            background: rgba(255, 236, 237, 0.8) !important;
            border: 1px solid rgba(146, 146, 156, 0.2) !important;
            backdrop-filter: none;
            color: #92929c !important;
            border-radius: 8px !important;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1) !important;
        }

        .sage-mode .text-subtle {
            color: rgba(171, 164, 123, 0.8) !important;
        }

        .sage-mode .badge-soft {
            background: rgba(241, 235, 182, 0.8) !important;
            color: #aba47b !important;
            font-weight: 600 !important;
            border-radius: 8px !important;
        }

        .sage-mode .stat-card {
            background: rgba(251, 212, 210, 0.6) !important;
            border: 1px solid rgba(146, 146, 156, 0.2) !important;
            color: #92929c !important;
            border-radius: 8px !important;
            box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1) !important;
        }

        .sage-mode .stat-card:hover {
            background: rgba(241, 180, 180, 0.8) !important;
            border-color: rgba(146, 146, 156, 0.3) !important;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1) !important;
            transform: translateY(-1px);
        }

        .sage-mode .field-card {
            background: #ffffff !important;
            border: 1px solid rgba(146, 146, 156, 0.15) !important;
            color: #92929c !important;
            border-radius: 8px !important;
        }

        .sage-mode .field-card:hover {
            background: rgba(255, 236, 237, 0.3) !important;
            border-color: rgba(146, 146, 156, 0.25) !important;
        }

        .sage-mode .alert-dark {
            background-color: rgba(255, 236, 237, 0.8) !important;
            border-color: rgba(146, 146, 156, 0.3) !important;
            color: #92929c !important;
            border-radius: 8px !important;
        }

        .sage-mode .btn-outline-info {
            border-color: #cac18a !important;
            color: #cac18a !important;
            border-radius: 8px !important;
            font-weight: 500 !important;
        }

        .sage-mode .btn-outline-info:hover {
            background-color: #cac18a !important;
            border-color: #cac18a !important;
            color: #ffffff !important;
        }

        .sage-mode .btn-outline-secondary {
            border-color: #aba47b !important;
            color: #aba47b !important;
            border-radius: 8px !important;
            font-weight: 500 !important;
        }

        .sage-mode .btn-outline-secondary:hover {
            background-color: #aba47b !important;
            border-color: #aba47b !important;
            color: #ffffff !important;
        }

        .sage-mode .theme-menu-btn:hover {
            background: rgba(146, 146, 156, 0.1) !important;
        }

        .sage-mode .hamburger-icon {
            color: rgba(146, 146, 156, 0.8) !important;
        }

        .sage-mode .theme-menu-btn:hover .hamburger-icon {
            color: #aba47b !important;
        }

        .sage-mode .theme-dropdown-menu {
            background: rgba(226, 228, 223, 0.95) !important;
            border: 1px solid rgba(146, 146, 156, 0.3) !important;
        }

        .sage-mode .theme-dropdown-menu .dropdown-header {
            color: rgba(146, 146, 156, 0.8) !important;
        }

        .sage-mode .theme-dropdown-menu .dropdown-item {
            color: rgba(146, 146, 156, 0.9) !important;
        }

        .sage-mode .theme-dropdown-menu .dropdown-item:hover {
            background: rgba(171, 164, 123, 0.1) !important;
            color: #92929c !important;
        }

        .sage-mode .stat-icon {
            background: rgba(228, 219, 160, 0.6) !important;
            color: #cac18a !important;
            border-radius: 8px !important;
        }
    </style>
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark landing-navbar sticky-top py-3">
        <div class="container">
            <a class="navbar-brand fw-semibold text-glow" href="/">Issuetrak Webforms Dashboard</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link nav-link-muted" href="/">Overview</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link nav-link-muted" href="/#webforms">Webforms</a>
                    </li>
                    <li class="nav-item dropdown">
                        <button
                            class="btn theme-menu-btn p-2"
                            id="theme-dropdown"
                            data-bs-toggle="dropdown"
                            aria-expanded="false"
                        >
                            <svg class="hamburger-icon" width="24" height="24" viewBox="0 0 24 24" fill="none">
                                <line x1="3" y1="6" x2="21" y2="6" stroke="currentColor" stroke-width="2"/>
                                <line x1="3" y1="12" x2="21" y2="12" stroke="currentColor" stroke-width="2"/>
                                <line x1="3" y1="18" x2="21" y2="18" stroke="currentColor" stroke-width="2"/>
                            </svg>
                        </button>
                        <ul class="dropdown-menu theme-dropdown-menu">
                            <li><h6 class="dropdown-header">Select Theme</h6></li>
                            <li><a class="dropdown-item" href="#" onclick="selectTheme('dark'); return false;">
                                <span class="theme-option">
                                    <span class="theme-emoji">🌙</span>
                                    <span class="theme-name">Dark Mode</span>
                                </span>
                            </a></li>
                            <li><a class="dropdown-item" href="#" onclick="selectTheme('light'); return false;">
                                <span class="theme-option">
                                    <span class="theme-emoji">☀️</span>
                                    <span class="theme-name">Light Mode</span>
                                </span>
                            </a></li>
                            <li><a class="dropdown-item" href="#" onclick="selectTheme('custom'); return false;">
                                <span class="theme-option">
                                    <span class="theme-emoji">🌊</span>
                                    <span class="theme-name">Ocean Mode</span>
                                </span>
                            </a></li>
                            <li><a class="dropdown-item" href="#" onclick="selectTheme('midnight'); return false;">
                                <span class="theme-option">
                                    <span class="theme-emoji">🌌</span>
                                    <span class="theme-name">Midnight Mode</span>
                                </span>
                            </a></li>
                            <li><a class="dropdown-item" href="#" onclick="selectTheme('sage'); return false;">
                                <span class="theme-option">
                                    <span class="theme-emoji">🌿</span>
                                    <span class="theme-name">Sage Garden</span>
                                </span>
                            </a></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container py-5">
        <div class="row justify-content-center">
            <div class="col-xl-10 col-lg-11">
                <!-- Loading State -->
                <div id="loading" class="text-center py-5">
                    <div class="loading">
                        <div class="spinner-border text-info" role="status">
                            <span class="visually-hidden">Loading...</span>
                        </div>
                        <p class="mt-3 text-subtle">Loading webform details...</p>
                    </div>
                </div>

                <!-- Error State -->
                <div id="error" class="d-none">
                    <div class="alert alert-dark" role="alert">
                        <h4 class="alert-heading">Error Loading Webform</h4>
                        <p class="mb-0">Unable to load the specified webform data. Please check the file parameter and try again.</p>
                    </div>
                </div>

                <!-- Content -->
                <div id="content" class="d-none">
                    <!-- Header -->
                    <div class="glass-card mb-4">
                        <div class="card-body p-4">
                            <div class="d-flex flex-column flex-lg-row gap-3 align-items-lg-center justify-content-between">
                                <div>
                                    <span class="badge-soft" id="customer-badge">Customer</span>
                                    <h1 class="h3 mt-2 mb-1" id="webform-title">Webform Details</h1>
                                    <p class="text-subtle mb-0" id="webform-subtitle">Loading...</p>
                                </div>
                                <div class="d-flex gap-2">
                                    <button class="btn btn-outline-info" id="view-json-btn">
                                        View JSON
                                    </button>
                                    <button class="btn btn-outline-secondary" onclick="window.history.back()">
                                        Back to List
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Stats Overview -->
                    <div class="row g-4 mb-4" id="stats-overview">
                        <!-- Stats will be populated by JavaScript -->
                    </div>

                    <!-- Cards Section -->
                    <div class="glass-card">
                        <div class="card-body p-4">
                            <h2 class="h5 mb-4">Form Structure</h2>
                            <div id="cards-container">
                                <!-- Cards will be populated by JavaScript -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Five-state theme system
        let currentTheme = 'custom'; // 'dark', 'light', 'custom', 'midnight', 'sage'

        function updateTheme() {
            const body = document.body;
            const themeIcon = document.getElementById('theme-icon');

            // Remove all theme classes
            body.classList.remove('dark-mode', 'light-mode', 'custom-mode', 'midnight-mode', 'sage-mode');

            // Add current theme class
            body.classList.add(`${currentTheme}-mode`);

            // Update icon (no longer used, but keeping for compatibility)
            switch (currentTheme) {
                case 'dark':
                    themeIcon.innerHTML = '🌙';
                    break;
                case 'light':
                    themeIcon.innerHTML = '☀️';
                    break;
                case 'custom':
                    themeIcon.innerHTML = '🌊';
                    break;
                case 'midnight':
                    themeIcon.innerHTML = '🌌';
                    break;
                case 'sage':
                    themeIcon.innerHTML = '🌿';
                    break;
            }
        }

        function selectTheme(theme) {
            currentTheme = theme;
            updateTheme();
            // Close dropdown manually
            const dropdown = bootstrap.Dropdown.getInstance(document.getElementById('theme-dropdown'));
            if (dropdown) dropdown.hide();
        }

        // Initialize theme
        document.addEventListener('DOMContentLoaded', function() {
            updateTheme();
            document.getElementById('theme-toggle').addEventListener('click', cycleTheme);
        });

        // Get the filename from URL parameters
        const urlParams = new URLSearchParams(window.location.search);
        const filename = urlParams.get('file');

        if (!filename) {
            showError();
        } else {
            loadWebformData(filename);
        }

        async function loadWebformData(filename) {
            try {
                const response = await fetch(`/data/${filename}`);
                if (!response.ok) {
                    throw new Error('Failed to fetch webform data');
                }

                const data = await response.json();
                displayWebformData(data, filename);
            } catch (error) {
                console.error('Error loading webform data:', error);
                showError();
            }
        }

        function showError() {
            document.getElementById('loading').classList.add('d-none');
            document.getElementById('error').classList.remove('d-none');
        }

        function displayWebformData(data, filename) {
            document.getElementById('loading').classList.add('d-none');
            document.getElementById('content').classList.remove('d-none');

            // Update header
            document.getElementById('customer-badge').textContent = data.CustomerName || 'Unknown Customer';
            document.getElementById('webform-title').textContent = data.RepoSlug || filename;
            document.getElementById('webform-subtitle').textContent = `${data.NumberOfCards || 0} cards • ${data.NumberOfFieldsTotal || 0} total fields`;

            // Set up JSON view button
            document.getElementById('view-json-btn').onclick = () => {
                window.open(`/data/${filename}`, '_blank');
            };

            // Create stats overview
            createStatsOverview(data);

            // Create cards display
            createCardsDisplay(data);
        }

        function createStatsOverview(data) {
            const statsContainer = document.getElementById('stats-overview');

            const stats = [
                {
                    icon: '📊',
                    title: 'Total Fields',
                    value: data.NumberOfFieldsTotal || 0,
                    color: 'rgba(56, 189, 248, 0.2)',
                    textColor: '#38bdf8'
                },
                {
                    icon: '📝',
                    title: 'Text Fields',
                    value: data.totalNumberOfTextFields || 0,
                    color: 'rgba(34, 197, 94, 0.2)',
                    textColor: '#22c55e'
                },
                {
                    icon: '🔢',
                    title: 'Number Fields',
                    value: data.totalNumberOfNumberFields || 0,
                    color: 'rgba(168, 85, 247, 0.2)',
                    textColor: '#a855f7'
                },
                {
                    icon: '📅',
                    title: 'Date Fields',
                    value: data.totalNumberOfDateFields || 0,
                    color: 'rgba(245, 158, 11, 0.2)',
                    textColor: '#f59e0b'
                },
                {
                    icon: '☑️',
                    title: 'Checkbox Fields',
                    value: data.totalNumberOfCheckboxFields || 0,
                    color: 'rgba(236, 72, 153, 0.2)',
                    textColor: '#ec4899'
                },
                {
                    icon: '📁',
                    title: 'File Fields',
                    value: data.totalNumberOfFileFields || 0,
                    color: 'rgba(239, 68, 68, 0.2)',
                    textColor: '#ef4444'
                }
            ];

            statsContainer.innerHTML = stats.map(stat => `
                <div class="col-md-4 col-lg-2">
                    <div class="stat-card p-3 h-100">
                        <div class="d-flex align-items-center gap-3">
                            <div class="stat-icon" style="background: ${stat.color}; color: ${stat.textColor};">
                                ${stat.icon}
                            </div>
                            <div>
                                <div class="fs-4 fw-bold mb-0">${stat.value}</div>
                                <div class="text-subtle small">${stat.title}</div>
                            </div>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function createCardsDisplay(data) {
            const cardsContainer = document.getElementById('cards-container');

            if (!data.Cards || data.Cards.length === 0) {
                cardsContainer.innerHTML = '<p class="text-subtle text-center py-4">No form cards available</p>';
                return;
            }

            cardsContainer.innerHTML = data.Cards.map((card, index) => `
                <div class="mb-4">
                    <h3 class="h6 mb-3 d-flex align-items-center gap-2">
                        <span class="badge bg-info text-dark">Card ${index + 1}</span>
                        ${card.cardHeader || 'Untitled Card'}
                        <small class="text-subtle">• ${card.numberOfColumns || 1} columns</small>
                    </h3>
                    <div class="row g-3">
                        ${(card.Fields || []).map(field => `
                            <div class="col-md-6 col-lg-4">
                                <div class="field-card p-3">
                                    <h4 class="h6 mb-2">${field.fieldLabel || 'Untitled Field'}</h4>
                                    <div class="d-flex flex-wrap gap-1 mb-2">
                                        <span class="badge rounded-pill ${getDataTypeBadgeClass(field.dataType)}">${field.dataType || 'unknown'}</span>
                                    </div>
                                    <div class="small text-subtle">
                                        ${field.fieldUpdatesUser ? '<span class="badge bg-success me-1">User</span>' : ''}
                                        ${field.fieldUpdatesCustomData ? '<span class="badge bg-warning text-dark me-1">Custom</span>' : ''}
                                        ${field.fieldUpdatesIssue ? '<span class="badge bg-primary me-1">Issue</span>' : ''}
                                    </div>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `).join('');
        }

        function getDataTypeBadgeClass(dataType) {
            const typeClasses = {
                'text': 'bg-info text-dark',
                'textarea': 'bg-info text-dark',
                'number': 'bg-purple text-white',
                'date': 'bg-warning text-dark',
                'checkbox': 'bg-secondary',
                'radio': 'bg-secondary',
                'dropdown': 'bg-secondary',
                'file': 'bg-danger'
            };
            return typeClasses[dataType] || 'bg-secondary';
        }
    </script>

    <style>
        .bg-purple {
            background-color: #a855f7 !important;
        }
    </style>
</body>
</html>